var webSiteAdvantage=webSiteAdvantage||{};webSiteAdvantage.yotpoRichSnippets=webSiteAdvantage.yotpoRichSnippets||[];webSiteAdvantage.yotpoRichSnippets=function(n){this.initialise(n)};webSiteAdvantage.yotpoRichSnippets.prototype={yotpoPlaceHolder:".yotpo-main-widget",constructor:webSiteAdvantage.yotpoRichSnippets,initialise:function(n){try{if(typeof n!="undefined"&&n!=null&&(this.yotpoPlaceHolder=n),document.querySelector(this.yotpoPlaceHolder)==null&&(console.log("yotpoRichSnippets: Could not find yotpoPlaceHolder "+this.yotpoPlaceHolder),this.yotpoPlaceHolder=".yotpo.placeholder",console.log("yotpoRichSnippets: Trying "+this.yotpoPlaceHolder)),this._yotpoPlaceHolderElement=document.querySelector(this.yotpoPlaceHolder),this._yotpoPlaceHolderElement!=null){var t=this;this._observer=new MutationObserver(function(n){n.forEach(function(n){var r=n.addedNodes,u;if(r!==null)for(i=0;i<r.length;i++)u=r[i],typeof u.classList!="undefined"&&u.classList.contains("yotpo-display-wrapper")&&(t._observer.disconnect(),t._observer=null,t._addMarkup())})});this._observer.observe(this._yotpoPlaceHolderElement,this._observerConfig)}else console.log("yotpoRichSnippets: Could not find yotpoPlaceHolder "+this.yotpoPlaceHolder),console.log("yotpoRichSnippets: Failed")}catch(r){console.log("yotpoRichSnippets: initialise Error: "+r.message)}},_markupAdded:!1,_observer:null,_observerConfig:{attributes:!0,childList:!0,characterData:!0,subtree:!0},_yotpoPlaceHolderElement:null,_getCount:function(n){var i=document.querySelector('.yotpo-distibutions-sum-reviews span[data-score-distribution="'+n+'"]'),t;return i!=null&&(t=i.textContent,t.length>=3)?parseInt(t.substr(1,t.length-2)):0},_getReviewCount:function(){var t=document.querySelector(".yotpo-reviews-nav-tab-sum"),n;return t!=null&&(n=t.textContent,n.length>=3)?parseInt(n.substr(1,n.length-2)):(console.log("yotpoRichSnippets: Failed to find reviewCount. Using 0"),0)},_addMarkup:function(){var t,e,n,u,v;if(!this._markupAdded){this._markupAdded=!0;try{var o=this._getCount(5),s=this._getCount(4),h=this._getCount(3),c=this._getCount(2),l=this._getCount(1),f=o+s+h+c+l,a=(o*5+s*4+h*3+c*2+l*1)/f;if(f==0&&(f=this._getReviewCount(),a=document.querySelectorAll(".yotpo-stars-and-sum-reviews .yotpo-stars .yotpo-icon-star").length+document.querySelectorAll(".yotpo-stars-and-sum-reviews .yotpo-stars .yotpo-icon-half-star").length/2),f>0)for(t=document.querySelector(".yotpo-stars-and-sum-reviews"),t!=null?(t.setAttribute("id","yotpo-aggregate-rating"),t.setAttribute("itemprop","aggregateRating"),t.setAttribute("itemscope",""),t.setAttribute("itemtype","http://schema.org/AggregateRating")):console.log("yotpoRichSnippets: Failed to find aggregateRating Element"),this._addItemProps(t,".based-on","reviewCount",f),this._addItemProps(t,".yotpo-stars-and-sum-reviews .yotpo-stars","ratingValue",a),this._appendItemPropMetaTag(t,"worstRating","1"),this._appendItemPropMetaTag(t,"bestRating","5"),e=this._yotpoPlaceHolderElement.querySelectorAll(".yotpo-review"),e.length==0&&console.log("yotpoRichSnippets: Failed to find any reviews"),r=0;r<e.length;r++)n=e[r],n.classList.contains("yotpo-hidden")||(n.setAttribute("itemprop","review"),n.setAttribute("itemscope",""),n.setAttribute("itemtype","http://schema.org/Review"),u=n.querySelector(".yotpo-review-stars"),u!=null?(u.setAttribute("itemprop","reviewRating"),u.setAttribute("itemscope",""),u.setAttribute("itemtype","http://schema.org/Rating"),v=n.querySelectorAll(".yotpo-icon-star").length,this._appendItemPropMetaTag(u,"ratingValue",v)):console.log("yotpoRichSnippets: Failed to find reviewRating Element for review "+i),this._addItemProps(n,'div[itemprop="review"] > .yotpo-header .yotpo-user-name',"author"),this._addItemProps(n,'div[itemprop="review"] > .yotpo-header .content-title .yotpo-font-bold',"name"),this._addItemProps(n,'div[itemprop="review"] > .yotpo-main .content-review',"reviewBody"),this._addItemProps(n,'div[itemprop="review"] > .yotpo-header .yotpo-review-date',"datePublished"))}catch(y){console.log("yotpoRichSnippets: _addMarkup Error: "+y.message)}}},_appendItemPropMetaTag:function(n,t,i){var r=document.createElement("meta");r.setAttribute("itemprop",t);r.setAttribute("content",i);n.appendChild(r)},_addItemProps:function(n,t,r,u){var e=n.querySelectorAll(t),f;for(i=0;i<e.length;i++)f=e[i],f.setAttribute("itemprop",r),typeof u!="undefined"&&u!=null&&f.setAttribute("content",u)}};new webSiteAdvantage.yotpoRichSnippets